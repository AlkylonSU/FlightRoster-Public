{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import'./PassengerTable.css';// Import CSS file for styling\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CombinedTable=_ref=>{let{data}=_ref;const[selectedPerson,setSelectedPerson]=useState(null);const handleRowClick=person=>{setSelectedPerson(person);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"All People on the Flight\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"passenger-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Full Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Age\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Gender\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Nationality\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Additional Info\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map(person=>/*#__PURE__*/_jsxs(\"tr\",{onClick:()=>handleRowClick(person),children:[/*#__PURE__*/_jsx(\"td\",{children:person.id}),/*#__PURE__*/_jsx(\"td\",{children:person.type}),/*#__PURE__*/_jsx(\"td\",{children:person.name}),/*#__PURE__*/_jsx(\"td\",{children:person.age}),/*#__PURE__*/_jsx(\"td\",{children:person.gender}),/*#__PURE__*/_jsx(\"td\",{children:person.nationality}),/*#__PURE__*/_jsx(\"td\",{children:person.additionalInfo})]},person.id))})]}),selectedPerson&&/*#__PURE__*/_jsxs(\"div\",{className:\"user-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"User Information\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"ID:\"}),\" \",selectedPerson.id]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",selectedPerson.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Age:\"}),\" \",selectedPerson.age]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Gender:\"}),\" \",selectedPerson.gender]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nationality:\"}),\" \",selectedPerson.nationality]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Type:\"}),\" \",selectedPerson.type]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Additional Info:\"}),\" \",selectedPerson.additionalInfo]})]})]});};const TabularView=()=>{const{flightNumber}=useParams();const[data,setData]=useState([]);useEffect(()=>{const fetchPassengers=async()=>{try{const response=await fetch(\"http://localhost:8000/api/passengerinfo/flight/\".concat(flightNumber,\"/\"));const passengers=await response.json();console.log('Passengers:',passengers);// Debug log\nconst formattedPassengers=passengers.map(passenger=>({id:passenger.passenger_id,type:'Passenger',name:passenger.passenger_name,age:passenger.age,gender:passenger.gender,nationality:passenger.nationality,additionalInfo:\"Seat Type: \".concat(passenger.seat_type,\", Children: \").concat(passenger.children&&passenger.children.length>0?passenger.children.map(child=>child.child_name).join(', '):'No children')}));return formattedPassengers;}catch(error){console.error('Error fetching passengers:',error);return[];}};const fetchCrew=async()=>{try{const response=await fetch(\"http://localhost:8080/backend/assigned-crew/\".concat(flightNumber,\"/\"));const crew=await response.json();console.log('Crew:',crew);// Debug log\nconst formattedCrew=crew.map(crewMember=>{const isFlightCrew=crewMember.type==='flight';const id=isFlightCrew?crewMember.pilot_id:crewMember.attendant_id;const additionalInfo=isFlightCrew?\"Vehicle Restriction: \".concat(crewMember.vehicle_restriction||'N/A',\", Allowed Range: \").concat(crewMember.allowed_range||'N/A',\", Seniority Level: \").concat(crewMember.seniority_level||'N/A'):\"Vehicle Restrictions: \".concat(crewMember.vehicle_restrictions||'N/A',\", Attendant Type: \").concat(crewMember.attendant_type||'N/A',\", Dishes: \").concat(crewMember.dish_recipes&&crewMember.dish_recipes.length>0?crewMember.dish_recipes.map(dish=>dish.recipe_name).join(', '):'Cabin Crew Member not suitable for dishes');return{id,type:isFlightCrew?'Flight Crew':'Cabin Crew',name:crewMember.name,age:crewMember.age,gender:crewMember.gender,nationality:crewMember.nationality,additionalInfo};});return formattedCrew;}catch(error){console.error('Error fetching crew:',error);return[];}};const fetchData=async()=>{const passengers=await fetchPassengers();const crew=await fetchCrew();setData([...passengers,...crew]);};fetchData();},[flightNumber]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Tabular View - Interior of the Plane\"}),/*#__PURE__*/_jsx(CombinedTable,{data:data})]});};export default TabularView;","map":{"version":3,"names":["React","useState","useEffect","useParams","jsx","_jsx","jsxs","_jsxs","CombinedTable","_ref","data","selectedPerson","setSelectedPerson","handleRowClick","person","children","className","map","onClick","id","type","name","age","gender","nationality","additionalInfo","TabularView","flightNumber","setData","fetchPassengers","response","fetch","concat","passengers","json","console","log","formattedPassengers","passenger","passenger_id","passenger_name","seat_type","length","child","child_name","join","error","fetchCrew","crew","formattedCrew","crewMember","isFlightCrew","pilot_id","attendant_id","vehicle_restriction","allowed_range","seniority_level","vehicle_restrictions","attendant_type","dish_recipes","dish","recipe_name","fetchData"],"sources":["D:/Projects/FlightRoster/Main System/frontend/src/components/views/TabularView.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport './PassengerTable.css'; // Import CSS file for styling\r\n\r\nconst CombinedTable = ({ data }) => {\r\n  const [selectedPerson, setSelectedPerson] = useState(null);\r\n\r\n  const handleRowClick = (person) => {\r\n    setSelectedPerson(person);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>All People on the Flight</h2>\r\n      <table className=\"passenger-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>Type</th>\r\n            <th>Full Name</th>\r\n            <th>Age</th>\r\n            <th>Gender</th>\r\n            <th>Nationality</th>\r\n            <th>Additional Info</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {data.map((person) => (\r\n            <tr key={person.id} onClick={() => handleRowClick(person)}>\r\n              <td>{person.id}</td>\r\n              <td>{person.type}</td>\r\n              <td>{person.name}</td>\r\n              <td>{person.age}</td>\r\n              <td>{person.gender}</td>\r\n              <td>{person.nationality}</td>\r\n              <td>{person.additionalInfo}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      {selectedPerson && (\r\n        <div className=\"user-card\">\r\n          <h3>User Information</h3>\r\n          <p><strong>ID:</strong> {selectedPerson.id}</p>\r\n          <p><strong>Name:</strong> {selectedPerson.name}</p>\r\n          <p><strong>Age:</strong> {selectedPerson.age}</p>\r\n          <p><strong>Gender:</strong> {selectedPerson.gender}</p>\r\n          <p><strong>Nationality:</strong> {selectedPerson.nationality}</p>\r\n          <p><strong>Type:</strong> {selectedPerson.type}</p>\r\n          <p><strong>Additional Info:</strong> {selectedPerson.additionalInfo}</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst TabularView = () => {\r\n  const { flightNumber } = useParams();\r\n  const [data, setData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchPassengers = async () => {\r\n      try {\r\n        const response = await fetch(`http://localhost:8000/api/passengerinfo/flight/${flightNumber}/`);\r\n        const passengers = await response.json();\r\n        console.log('Passengers:', passengers); // Debug log\r\n        const formattedPassengers = passengers.map(passenger => ({\r\n          id: passenger.passenger_id,\r\n          type: 'Passenger',\r\n          name: passenger.passenger_name,\r\n          age: passenger.age,\r\n          gender: passenger.gender,\r\n          nationality: passenger.nationality,\r\n          additionalInfo: `Seat Type: ${passenger.seat_type}, Children: ${\r\n            passenger.children && passenger.children.length > 0\r\n              ? passenger.children.map(child => child.child_name).join(', ')\r\n              : 'No children'\r\n          }`\r\n        }));\r\n        return formattedPassengers;\r\n      } catch (error) {\r\n        console.error('Error fetching passengers:', error);\r\n        return [];\r\n      }\r\n    };\r\n\r\n    const fetchCrew = async () => {\r\n      try {\r\n        const response = await fetch(`http://localhost:8080/backend/assigned-crew/${flightNumber}/`);\r\n        const crew = await response.json();\r\n        console.log('Crew:', crew); // Debug log\r\n\r\n        const formattedCrew = crew.map(crewMember => {\r\n          const isFlightCrew = crewMember.type === 'flight';\r\n          const id = isFlightCrew ? crewMember.pilot_id : crewMember.attendant_id;\r\n          const additionalInfo = isFlightCrew\r\n            ? `Vehicle Restriction: ${crewMember.vehicle_restriction || 'N/A'}, Allowed Range: ${crewMember.allowed_range || 'N/A'}, Seniority Level: ${crewMember.seniority_level || 'N/A'}`\r\n            : `Vehicle Restrictions: ${crewMember.vehicle_restrictions || 'N/A'}, Attendant Type: ${crewMember.attendant_type || 'N/A'}, Dishes: ${\r\n                crewMember.dish_recipes && crewMember.dish_recipes.length > 0\r\n                  ? crewMember.dish_recipes.map(dish => dish.recipe_name).join(', ')\r\n                  : 'Cabin Crew Member not suitable for dishes'\r\n              }`;\r\n\r\n          return {\r\n            id,\r\n            type: isFlightCrew ? 'Flight Crew' : 'Cabin Crew',\r\n            name: crewMember.name,\r\n            age: crewMember.age,\r\n            gender: crewMember.gender,\r\n            nationality: crewMember.nationality,\r\n            additionalInfo\r\n          };\r\n        });\r\n        return formattedCrew;\r\n      } catch (error) {\r\n        console.error('Error fetching crew:', error);\r\n        return [];\r\n      }\r\n    };\r\n\r\n    const fetchData = async () => {\r\n      const passengers = await fetchPassengers();\r\n      const crew = await fetchCrew();\r\n      setData([...passengers, ...crew]);\r\n    };\r\n\r\n    fetchData();\r\n  }, [flightNumber]);\r\n\r\n  return (\r\n    <div>\r\n      <h1>Tabular View - Interior of the Plane</h1>\r\n      <CombinedTable data={data} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TabularView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
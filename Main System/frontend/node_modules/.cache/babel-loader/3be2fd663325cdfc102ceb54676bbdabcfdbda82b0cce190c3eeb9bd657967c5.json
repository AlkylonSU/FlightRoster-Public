{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useFlight}from'../context/FlightContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SelectFlight=()=>{const[flights,setFlights]=useState([]);const[selectedFlight,setSelectedFlight]=useState('');const navigate=useNavigate();const{setSelectedFlight:setGlobalSelectedFlight}=useFlight();useEffect(()=>{fetch('http://localhost:8000/api/flightinfo/all-flights/')// Replace with your API endpoint\n.then(response=>response.json()).then(data=>setFlights(data)).catch(error=>console.error('Error fetching flights:',error));},[]);const handleSelection=e=>{setSelectedFlight(e.target.value);};const handleSubmit=e=>{e.preventDefault();if(selectedFlight){const selectedFlightData=flights.find(flight=>flight.flight_number===selectedFlight);fetch('http://localhost:8080/backend/fetch-and-select-crew/',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({flight_number:selectedFlight})}).then(response=>response.json()).then(data=>{setGlobalSelectedFlight(selectedFlightData);navigate(\"/home/\".concat(selectedFlight));}).catch(error=>console.error('Error assigning crew:',error));}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Select Flight\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"flights\",children:\"Choose a flight:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"flights\",value:selectedFlight,onChange:handleSelection,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"Select a flight\"}),flights.map(flight=>/*#__PURE__*/_jsxs(\"option\",{value:flight.flight_number,children:[flight.flight_number,\" - \",flight.source_city,\" to \",flight.destination_city]},flight.flight_number))]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Confirm\"})]})]});};export default SelectFlight;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useFlight","jsx","_jsx","jsxs","_jsxs","SelectFlight","flights","setFlights","selectedFlight","setSelectedFlight","navigate","setGlobalSelectedFlight","fetch","then","response","json","data","catch","error","console","handleSelection","e","target","value","handleSubmit","preventDefault","selectedFlightData","find","flight","flight_number","method","headers","body","JSON","stringify","concat","children","onSubmit","htmlFor","id","onChange","disabled","map","source_city","destination_city","type"],"sources":["D:/Projects/FlightRoster/Main System/frontend/src/components/SelectFlight.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useFlight } from '../context/FlightContext';\r\n\r\nconst SelectFlight = () => {\r\n  const [flights, setFlights] = useState([]);\r\n  const [selectedFlight, setSelectedFlight] = useState('');\r\n  const navigate = useNavigate();\r\n  const { setSelectedFlight: setGlobalSelectedFlight } = useFlight();\r\n\r\n  useEffect(() => {\r\n    fetch('http://localhost:8000/api/flightinfo/all-flights/') // Replace with your API endpoint\r\n      .then(response => response.json())\r\n      .then(data => setFlights(data))\r\n      .catch(error => console.error('Error fetching flights:', error));\r\n  }, []);\r\n\r\n  const handleSelection = (e) => {\r\n    setSelectedFlight(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (selectedFlight) {\r\n      const selectedFlightData = flights.find(flight => flight.flight_number === selectedFlight);\r\n      fetch('http://localhost:8080/backend/fetch-and-select-crew/', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ flight_number: selectedFlight }),\r\n      })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        setGlobalSelectedFlight(selectedFlightData);\r\n        navigate(`/home/${selectedFlight}`);\r\n      })\r\n      .catch(error => console.error('Error assigning crew:', error));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Select Flight</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <label htmlFor=\"flights\">Choose a flight:</label>\r\n        <select id=\"flights\" value={selectedFlight} onChange={handleSelection}>\r\n          <option value=\"\" disabled>Select a flight</option>\r\n          {flights.map((flight) => (\r\n            <option key={flight.flight_number} value={flight.flight_number}>\r\n              {flight.flight_number} - {flight.source_city} to {flight.destination_city}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <button type=\"submit\">Confirm</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SelectFlight;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}